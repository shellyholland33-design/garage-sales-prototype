<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Garage Sales</title>

  <!-- PWA basics -->
  <link rel="manifest" href="manifest.webmanifest" />
  <meta name="theme-color" content="#0f766e" />
  <link rel="icon" href="icons/icon-192.png" />

  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <h1>Garage Sales</h1>
    <div class="install-tip" id="installTip" hidden>
      Add to home screen from your browser menu for a faster start next time.
    </div>
  </header>

  <main class="wrap">
    <!-- Filters -->
    <section class="panel" id="filters">
      <div class="row">
        <label>
          Search
          <input id="q" type="search" placeholder="title, description, address" />
        </label>

        <label>
          Suburb
          <input id="suburb" type="text" placeholder="e.g. Cunnamulla" />
        </label>

        <label>
          Postcode
          <input id="postcode" type="text" placeholder="e.g. 4350 or 4350, 4352" />
        </label>
      </div>

      <div class="row">
        <label>
          Date from
          <input id="dateFrom" type="date" />
        </label>

        <label>
          Date to
          <input id="dateTo" type="date" />
        </label>

        <label>
          Max distance km
          <input id="maxKm" type="number" min="1" step="1" placeholder="optional" />
        </label>

        <label>
          Sort by
          <select id="sortBy">
            <option value="dateAsc">Date, earliest first</option>
            <option value="dateDesc">Date, latest first</option>
            <option value="distance">Distance, nearest first</option>
            <option value="newest">Recently added first</option>
          </select>
        </label>
      </div>

      <div class="row days">
        <span>Days</span>
        <label><input type="checkbox" class="dow" value="0" /> Sun</label>
        <label><input type="checkbox" class="dow" value="1" /> Mon</label>
        <label><input type="checkbox" class="dow" value="2" /> Tue</label>
        <label><input type="checkbox" class="dow" value="3" /> Wed</label>
        <label><input type="checkbox" class="dow" value="4" /> Thu</label>
        <label><input type="checkbox" class="dow" value="5" /> Fri</label>
        <label><input type="checkbox" class="dow" value="6" /> Sat</label>
      </div>

      <div class="row actions">
        <button id="apply">Apply filters</button>
        <button id="reset" class="ghost">Reset</button>
        <label class="toggle">
          <input id="hideViewed" type="checkbox" />
          Hide viewed
        </label>
        <label class="toggle">
          <input id="hideDismissed" type="checkbox" checked />
          Hide dismissed
        </label>
      </div>
      <div id="geoStatus" class="hint"></div>
    </section>

    <!-- Results -->
    <section class="panel">
      <div class="list-head">
        <div id="count">0 results</div>
        <div class="legend">
          <span class="pill viewed">Viewed</span>
          <span class="pill dismissed">Dismissed</span>
        </div>
      </div>

      <div id="list" class="grid"></div>
      <template id="cardTpl">
        <article class="card">
          <div class="cardBody">
            <h2 class="t"></h2>
            <div class="meta">
              <span class="when"></span>
              <span class="where"></span>
              <span class="distance"></span>
            </div>
            <p class="desc"></p>
          </div>
          <div class="cardActions">
            <a class="btn visit" target="_blank" rel="noopener">Visit</a>
            <button class="btn viewedBtn">Viewed</button>
            <button class="btn ghost dismissBtn">Dismiss</button>
          </div>
        </article>
      </template>
    </section>
  </main>

  <footer class="foot">
    <small>Works offline after first load. Data refreshes when you open the app.</small>
  </footer>

  <script src="app.js" type="module"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js').catch(console.error);
      });
    }
  </script>
</body>
</html>
